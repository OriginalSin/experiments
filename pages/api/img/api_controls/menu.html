<!DOCTYPE html>
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset="utf-8">
  <link rel="stylesheet" type="text/css" href="apiControls.css">
	<title>Меню</title>
</head>

<body>
<div id="control1" class="mainmenu">
    <ul id="nav">
      <li><span class="icon Print"></span></li>
      <li><span class="icon Link"></span></li>
    </ul> 
</div>
<div id="control4" class="textMenuVert">
    <ul id="nav">
      <li><span class="textItem whiteBG">Слои</span><div class="icon arrow arrVert right"></div>
        <ul> 
          <li><span class="textItem">Пожары очень длинные 1</span></li> 
          <li><span class="textItem">Пожары очень длинные</span></li> 
          <li><span class="textItem">Лоси</span></li> 
        </ul> 
      </li> 
    </ul>
</div>
<div id="control5" class="divMenu">
    <ul id="nav">
      <li class="">
		<div id="map_control" class="" style="float: right;">
			<div class="satelliteIcon divItem"></div>
			<div class="divText">Карта</div>
			<div class="icon arrow arrHor"></div>
		</div>
        <ul> 
			<li style="float: right;">
				<div class="">
					<div class="satelliteIcon divItem"></div>
					<div class="divText">OSM</div>
				</div>
			</li> 
			<li style="float: right;">
				<div class="">
					<div class="satelliteIcon divItem"></div>
					<div class="divText">Рельеф</div>
				</div>
			</li> 
        </ul> 
      </li> 
    </ul>
</div>
<div id="control6" class="divMenu">
    <ul id="nav">
      <li class="">
		<div id="satellite_control" class="" style="float: right;">
			<div class="mapIcon divItem"></div>
			<div class="divText">Снимки</div>
			<div class="icon arrow arrHor"></div>
		</div>
		
        <ul> 
			<li style="float: right;">
				<div class="">
					<div class="mapIcon divItem"></div>
					<div class="divText">Снимки 1</div>
				</div>
			</li> 
			<li style="float: right;"><div class=""><div class="mapIcon divItem"></div><div class="divText">Снимки 2</div></div></li> 
        </ul> 
      </li> 
    </ul>
</div>
<div id="control2" class="mainmenu">
    <ul id="nav">
      <li><span class="icon Rules"></span></li>
      <li><span class="icon Button"></span></li>
      <li><span class="icon Allocate"></span>
        <ul class="withMargin_1"> 
          <li><span class="icon Line"></span></li> 
        </ul> 
      </li> 
      <li><span class="icon Pen"></span></li>
      <li><span class="icon search"></span></li>
      <li><span class="icon turn"></span></li>
    </ul>
</div>
<div id="control3" class="mainmenu">
    <ul>
      <li class="vert">
		<div class="iconsBG"></div>
		<span id="zoomPlus" class="icon Plus"></span>
	  </li>
      <li class="vert">
		<div class="iconsBG"></div>
		<span id="zoomMinus" class="icon Minus"></span>
        <ul id="RulersCont" style="top: 27px;"> 
          <li>
			<div id="RulersClick" style="position: absolute; cursor: pointer;">
				<div id="RulersBG"></div>
				<div id="pointerCurrent" class="pointerCurrent">
					<div id="zoomVal" style="">23</div>
				</div>
				<span id="Rulers" class="Rulers">
				</span>
			</div>
		  </li> 
        </ul> 
	  </li>
    </ul> 
</div>
<div id="control7">
	<div class="underPage"></div>
	<div id="control_copyright">
		<a target="_blank" style="color: inherit;" href="http://maps.kosmosnimki.ru/Apikey/License.html">© 2007-2013 «СканЭкс»</a> <a target="_blank" style="color: inherit;" href="http://www.bartholomewmaps.com/">© Collins Bartholomew</a> <a target="_blank" style="color: inherit;" href="http://leafletjs.com">© Leaflet</a>
	</div>
	<div id="control8" class="scaleBar">
		<span id="locationTxt">x: 49.567, y: 56.567</span>
		<span id="scaleBar"></span>
		<span id="scaleBarTxt">15 000 км</span>
	</div>
</div>

<script type="text/javascript">
		/*
    var init_api_controls = function() {
		var getNodeList = function(e) {
			var target = gmxAPI.compatTarget(e);
console.log('getNodeList ', ev.currentTarget, ev.originalTarget, ev.explicitOriginalTarget);
			//var pTarget = ev.originalTarget.parentNode;
			
			return (target ? target.children : null);
		}
		var onMouseOverRulers = function(e) {
			//gmxAPI.stopEvent(e);
			var arr = getNodeList(e);
			if(!arr || arr.length < 1) return;
console.log('onmouseover ', arr[0]);
			//var curr = arr[0];
			var list = (arr.length > 1 ? arr[1] : null);
			if(list) {
				list.style.display = 'block';
			}
		}
		*/
		
// zoom control Begin
		var currZoom = 16;
		var minZ = 4;
		var maxZ = 14;
		var rulerHeight = 7;
		var rHeight = 0;

		var control3 = document.getElementById("control3");
		var Rulers = document.getElementById("Rulers");
		var RulersClick = document.getElementById("RulersClick");
		var RulersBG = document.getElementById("RulersBG");
		var zoomMinus = document.getElementById("zoomMinus");
		var zoomPlus = document.getElementById("zoomPlus");
		var RulersCont = document.getElementById("RulersCont");
		var pointerCurrent = document.getElementById("pointerCurrent");
		var zoomVal = document.getElementById("zoomVal");

		var setRulerSize = function() {
			rHeight = rulerHeight * (maxZ - minZ + 1);
			Rulers.style.height = rHeight + 'px';
			RulersBG.style.height = (rHeight + 13) + 'px';
		}
		setRulerSize();

		var setRulersPos = function(y) {
			var py = rHeight + rulerHeight * minZ - y;
			var z = Math.floor(py / rulerHeight) + 1;
			if(minZ > z) z = minZ;
			else if(maxZ < z) z = maxZ;
			setZoom(z);
		}
		RulersClick.onclick = function(e) {
			setRulersPos(e.layerY);
		}
		var setZoom = function(z) {
			currZoom = z;
			if(currZoom < minZ) currZoom = minZ;
			else if(currZoom > maxZ) currZoom = maxZ;
			var py = Math.floor((currZoom - minZ) * rulerHeight);
			pointerCurrent.style.bottom = (py - rHeight + 3) + 'px';
			zoomVal.innerHTML = currZoom;
		}
		setZoom(currZoom);

		zoomMinus.onclick = function(e) {
			setZoom(currZoom - 1);
		}
		zoomPlus.onclick = function(e) {
			setZoom(currZoom + 1);
		}
		control3.onmouseover = function(e) {
			RulersCont.style.display = 'block';
		}
		control3.onmouseout = function(e) {
			if(!RulersClick.onmousemove) RulersCont.style.display = '';
		}
		// drag бегунка
		pointerCurrent.onmousedown = function(e) {
			var layerPos = e.clientY - e.layerY;
			pointerCurrent.style.pointerEvents = 'none';
			RulersClick.onmousemove = function(e) {
				setRulersPos(e.layerY);
			}
		}
		document.onmouseup = function(e) {
//console.log('document onmouseup ', e);
			if(RulersClick.onmousemove) RulersCont.style.display = '';
			RulersClick.onmousemove = null;
			pointerCurrent.style.pointerEvents = 'auto';
		}
// zoom control End
		
// BaseLayers control Begin
		var mapCurrent = 'Снимки';
		var control5 = document.getElementById("control5");
		var control6 = document.getElementById("control6");
		var setMapType = function() {
			control6.style.display = (mapCurrent === 'Снимки' ? 'block' : 'none');
			control5.style.display = (mapCurrent === 'Снимки' ? 'none' : 'block');
		}
		setMapType();

		var satellite_control = document.getElementById("satellite_control");
		satellite_control.onclick = function(e) {
			mapCurrent = 'Карта';
			setMapType();
		}

		var map_control = document.getElementById("map_control");
		map_control.onclick = function(e) {
			mapCurrent = 'Снимки';
			setMapType();
		}
// BaseLayers control End

		var nullFunc = function() { return false; };
</script>


</body></html>